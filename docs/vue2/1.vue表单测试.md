### input 输入正整数

::: demo input 输入正整数(正则),有 bug：中文输入法下会多删除？？？

```html
<template>
    <div>
        <!-- 正则解释：匹配非数字的字符替换为空 -->
        <input v-model="formValue" oninput="value = value.replace(/[^\d]/g, '');" placeholder="请输入正整数" />
    </div>
</template>
<script>
    export default {
        data() {
            return {
                formValue: "",
            }
        },
    }
</script>
```

:::

::: demo input 输入正整数(methods)

```html
<template>
    <div>
        <input v-model="formValue" @input="changeIpt" placeholder="请输入正整数" />
    </div>
</template>
<script>
    export default {
        data() {
            return {
                formValue: "",
            }
        },
        methods: {
            changeIpt(e) {
                let val = e.target.value // 输入框的value值
                let reg = /[^\d]/g // 匹配非数字
                if (reg.test(val)) {
                    // 提示用户
                }
                this.formValue = val.replace(reg, "")
            },
        },
    }
</script>
```

:::
::: demo input 输入正整数(自定义指令),有 bug：输入法正在输入满足正则条件时会触发,偶尔失效？？？

```html
<template>
    <div>
        <input v-model="formValue" @input="changeIpt" v-integer placeholder="请输入正整数" />
    </div>
</template>
<script>
    export default {
        data() {
            return {
                formValue: "",
            }
        },
        methods: {
            changeIpt(e) {
                let val = e.target.value // 输入框的value值
                console.log(3, val)
            },
        },
        directives: {
            integer: {
                bind() {
                    //常用
                    // 指令第一次绑定到元素上时调用，只调用一次，可以执行初始化操作
                },
                inserted() {
                    // 指令所绑定的元素插入到DOM中时调用
                },
                update(el) {
                    // 被绑定元素所在模板更新时调用
                    let val = el.value // 输入框的value值
                    console.log(1, val)
                    let reg = /[^\d]/g // 匹配非数字
                    if (reg.test(val)) {
                        // 提示用户
                    }
                    el.value = val.replace(reg, "")
                    console.log(2, el.value)
                },
                componentUpdated(el) {
                    // 被绑定元素所在模板完成一次更新周期时调用
                },
                unbind() {
                    // 指令与元素解绑时调用，只执行一次
                },
            },
        },
    }
</script>
```

:::
